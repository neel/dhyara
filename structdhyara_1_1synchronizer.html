<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dhyara: dhyara::synchronizer Struct Reference</title>
<script>
function togglemenu(){
    let nav = document.getElementById("main-nav");
    const style = nav.style.display;
    nav.style.display = (style == 'none') ? 'block' : 'none';
}
</script>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<link href="qtify.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<div id="togglenav" onclick="togglemenu()">
&#9776;
</div>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Dhyara
   </div>
   <div id="projectbrief">Dhyara adhoc Network</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('structdhyara_1_1synchronizer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="structdhyara_1_1synchronizer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">dhyara::synchronizer Struct Reference<div class="ingroups"><a class="el" href="group__routing.html">Routing</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Synchronize routes accross all nodes in the network.  
 <a href="structdhyara_1_1synchronizer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="synchronizer_8h_source.html">synchronizer.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for dhyara::synchronizer:</div>
<div class="dyncontent">
<div class="center"><img src="structdhyara_1_1synchronizer__coll__graph.png" border="0" usemap="#dhyara_1_1synchronizer_coll__map" alt="Collaboration graph"/></div>
<map name="dhyara_1_1synchronizer_coll__map" id="dhyara_1_1synchronizer_coll__map">
<area shape="rect" title="Synchronize routes accross all nodes in the network." alt="" coords="1276,271,1435,297"/>
<area shape="rect" href="classdhyara_1_1link.html" title="Link is responsible for low level sending/receiving." alt="" coords="1039,235,1138,261"/>
<area shape="rect" href="structdhyara_1_1address.html" title="peer address (mac address)" alt="" coords="41,9,167,36"/>
<area shape="rect" href="structdhyara_1_1message.html" title="Envelop for both to be sent and has been received messages." alt="" coords="369,29,504,56"/>
<area shape="rect" href="structdhyara_1_1notifier.html" title="notifier" alt="" coords="697,197,819,224"/>
<area shape="rect" href="structdhyara_1_1watcher.html" title=" " alt="" coords="344,197,529,224"/>
<area shape="rect" href="classdhyara_1_1xqueue.html" title=" " alt="" coords="5,197,203,224"/>
<area shape="rect" href="classdhyara_1_1xqueue.html" title=" " alt="" coords="663,248,853,304"/>
<area shape="rect" href="structdhyara_1_1neighbourhood.html" title="Neighbourhood of a node." alt="" coords="672,328,844,355"/>
<area shape="rect" href="structdhyara_1_1routing.html" title="routing table" alt="" coords="697,379,819,405"/>
<area shape="rect" href="structdhyara_1_1universe.html" title="Universe of all nodes in the known in the universe." alt="" coords="693,429,823,456"/>
<area shape="rect" href="structdhyara_1_1frame.html" title="A 250 bytes frame is defined by a 2 bytes header and 248 bytes payload." alt="" coords="47,93,161,120"/>
<area shape="rect" href="structdhyara_1_1network__fifo.html" title=" " alt="" coords="669,81,847,122"/>
<area shape="rect" href="classdhyara_1_1xqueue.html" title=" " alt="" coords="336,81,537,122"/>
<area shape="rect" href="classdhyara_1_1xqueue.html" title=" " alt="" coords="985,286,1192,327"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8daf0ea3660c4ff21e4abe6e4fd5abfb"><td class="memItemLeft" align="right" valign="top"><a id="a8daf0ea3660c4ff21e4abe6e4fd5abfb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdhyara_1_1synchronizer.html#a8daf0ea3660c4ff21e4abe6e4fd5abfb">synchronizer</a> (<a class="el" href="classdhyara_1_1link.html">dhyara::link</a> &amp;<a class="el" href="classdhyara_1_1link.html">link</a>)</td></tr>
<tr class="memdesc:a8daf0ea3660c4ff21e4abe6e4fd5abfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct using a link. <br /></td></tr>
<tr class="separator:a8daf0ea3660c4ff21e4abe6e4fd5abfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66377aef4f9a77687b5ffa4c147ce2e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdhyara_1_1synchronizer.html#a66377aef4f9a77687b5ffa4c147ce2e7">queue</a> (const <a class="el" href="structdhyara_1_1address.html">dhyara::address</a> &amp;dest, const <a class="el" href="structdhyara_1_1address.html">dhyara::address</a> &amp;via, dhyara::delay_type delay)</td></tr>
<tr class="memdesc:a66377aef4f9a77687b5ffa4c147ce2e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">enqueue a candidate  <a href="structdhyara_1_1synchronizer.html#a66377aef4f9a77687b5ffa4c147ce2e7">More...</a><br /></td></tr>
<tr class="separator:a66377aef4f9a77687b5ffa4c147ce2e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c292309f9c5c87757d5baafa58f210"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdhyara_1_1synchronizer.html#a44c292309f9c5c87757d5baafa58f210">queue</a> (const <a class="el" href="structdhyara_1_1candidate.html">dhyara::candidate</a> &amp;c)</td></tr>
<tr class="memdesc:a44c292309f9c5c87757d5baafa58f210"><td class="mdescLeft">&#160;</td><td class="mdescRight">enqueue a candidate  <a href="structdhyara_1_1synchronizer.html#a44c292309f9c5c87757d5baafa58f210">More...</a><br /></td></tr>
<tr class="separator:a44c292309f9c5c87757d5baafa58f210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c986de495df7717564769e91c3660e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdhyara_1_1synchronizer.html#a2c986de495df7717564769e91c3660e4">run</a> ()</td></tr>
<tr class="memdesc:a2c986de495df7717564769e91c3660e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dequeue the candidates and sync.  <a href="structdhyara_1_1synchronizer.html#a2c986de495df7717564769e91c3660e4">More...</a><br /></td></tr>
<tr class="separator:a2c986de495df7717564769e91c3660e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a7b6b2b948e2e9ed22b37d11862bf74c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdhyara_1_1synchronizer.html#a7b6b2b948e2e9ed22b37d11862bf74c0">sync</a> (const <a class="el" href="structdhyara_1_1address.html">dhyara::address</a> &amp;dest, const <a class="el" href="structdhyara_1_1address.html">dhyara::address</a> &amp;via, dhyara::delay_type delay)</td></tr>
<tr class="memdesc:a7b6b2b948e2e9ed22b37d11862bf74c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates delay associated with the existing route (dest, via) to delay through the routing table (The route will be created if it does not exist already).  <a href="structdhyara_1_1synchronizer.html#a7b6b2b948e2e9ed22b37d11862bf74c0">More...</a><br /></td></tr>
<tr class="separator:a7b6b2b948e2e9ed22b37d11862bf74c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Synchronize routes accross all nodes in the network. </p>
<p>A synchronization candidate is enqueued. <br  />
 Synchronization candidate is defined by a route (self -&gt; via -&gt; destination) and an integer denoting one trip delay. The via is set to null to denote direct connectivity between self and destination. The run function (never returns) should be called from a task to dequeue the enqueued candidates and sync accross all nodes. Once dequeued, the routing table is updated using the candidate's delay.</p>
<p>The delay associated with the existing route (dest, via) is updated to the new delay (from the dequeued candidate) through the routing table (The route will be created if it does not exist already). The update operation in the routing table returns a boolean value depicting whether synchronization is required or not (best next hop for the destination is altered). If synchronization is required then finds the current next (best immediate hop) for the dest (which has been changed due to previous update). Constructs an advertisement packet with the delay associated with the current next. Sends that advertisement packet to all neighbours except the dest node.</p>
<p>Additionally it also maintains a map to maintain last advertisement time. If the update on the routing table responds true, denoting synchronization is required then the last advertisement time assocated with the dest is also updated. If the update returns false then this last advertisement time assocated with the dest is checked. If it is found out that no advertisement has been sent for this dest for too long (advertisement_expiry) then another advertisement is sent.</p>
<dl class="section note"><dt>Note</dt><dd>Not Default Constructible, Not Copyable, Not Copy Assignable. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structdhyara_1_1candidate.html" title="A synchronization candidate is defined by a route (self -&gt; via -&gt; destination) and an integer denotin...">dhyara::candidate</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="synchronizer_8h_source.html#l00070">70</a> of file <a class="el" href="synchronizer_8h_source.html">synchronizer.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a66377aef4f9a77687b5ffa4c147ce2e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66377aef4f9a77687b5ffa4c147ce2e7">&#9670;&nbsp;</a></span>queue() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dhyara::synchronizer::queue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdhyara_1_1address.html">dhyara::address</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdhyara_1_1address.html">dhyara::address</a> &amp;&#160;</td>
          <td class="paramname"><em>via</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dhyara::delay_type&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>enqueue a candidate </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>destination address </td></tr>
    <tr><td class="paramname">via</td><td>intermediate address </td></tr>
    <tr><td class="paramname">delay</td><td>one trip delay in that route </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a44c292309f9c5c87757d5baafa58f210"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44c292309f9c5c87757d5baafa58f210">&#9670;&nbsp;</a></span>queue() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dhyara::synchronizer::queue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdhyara_1_1candidate.html">dhyara::candidate</a> &amp;&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>enqueue a candidate </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>candidate </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2c986de495df7717564769e91c3660e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c986de495df7717564769e91c3660e4">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dhyara::synchronizer::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dequeue the candidates and sync. </p>
<p>Never returns. </p><dl class="section attention"><dt>Attention</dt><dd>Should be called from a FreeRTOS Task. Calls <a class="el" href="structdhyara_1_1synchronizer.html#a7b6b2b948e2e9ed22b37d11862bf74c0">sync</a> on each dequeued candidate. </dd></dl>

</div>
</div>
<a id="a7b6b2b948e2e9ed22b37d11862bf74c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b6b2b948e2e9ed22b37d11862bf74c0">&#9670;&nbsp;</a></span>sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dhyara::synchronizer::sync </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdhyara_1_1address.html">dhyara::address</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdhyara_1_1address.html">dhyara::address</a> &amp;&#160;</td>
          <td class="paramname"><em>via</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dhyara::delay_type&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates delay associated with the existing route (dest, via) to delay through the routing table (The route will be created if it does not exist already). </p>
<p>The update operation in the routing table returns a boolean value depicting whether synchronization is required or not. If synchronization is required then finds the current next (best immediate hop) for the dest (which has been changed due to previous update). Constructs an advertisement packet with the delay associated with the current next. Sends that advertisement packet to all neighbours except the dest node.</p>
<p>Additionally it also maintains a map to maintain last advertisement time. If the update on the routing table responds true, denoting synchronization is required then the last advertisement time assocated with the dest is also updated. If the update returns false then this last advertisement time assocated with the dest is checked. If it is found out that no advertisement has been sent for this dest for too long (advertisement_expiry) then another advertisement is sent.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>The destination address </td></tr>
    <tr><td class="paramname">via</td><td>The intermediate node address </td></tr>
    <tr><td class="paramname">delay</td><td>the one trip delay on this route </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>includes/dhyara/<a class="el" href="synchronizer_8h_source.html">synchronizer.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>dhyara</b></li><li class="navelem"><a class="el" href="structdhyara_1_1synchronizer.html">synchronizer</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
